<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS + CSS Clock + By Edison Added Numbers + Fixed Rotation</title>
  <link rel="icon" href="https://fav.farm/ðŸ”¥" />
</head>
<body>
    <div class="clock">
      <div class="clock-face">
        <div class="hand hour-hand"></div>
        <div class="hand min-hand"></div>
        <div class="hand second-hand"></div>
        <div>
         <canvas id="clockCanvas" class = "clock-numbers" width="400" height="400"></canvas>
        </div>
      </div>
      <br>
      <br>
      <div class="title"><h2>JS + CSS Clock + By Edison Added Numbers + Fixed Rotation + Colored-Sized handlers</h2></div>  
    </div>
    </div>
  
    <style lang="scss" scoped>
         @import '../style3.css';
    </style>
    
  <script>
    /* to find the respective h,m,s animation CSS class*/
    const secondsHand = document.querySelector('.second-hand');
    const minsHand = document.querySelector('.min-hand');
    const hoursHand = document.querySelector('.hour-hand');
    const now = new Date(2025,8,7,11,58,58); 
    function setDate(){
      now.setSeconds(now.getSeconds() + 1);
      const seconds = now.getSeconds();
      
      // to convert time into degress 0 hms = 0 deg, 12 hms = 360 deg
      let secondsDegrees = ((seconds /60) * 360) + (seconds === 0 ? 0 : 90); // + 90 to upset the rotation start point at 12 o'clock
       // To listen for a transition change event on each of the transform rotate when it is changed then execute the respective function
      if (secondsDegrees === 0) { /* at 0 seconds the handler rotates 90deg before to continue, therefore I have to remove this event before to start*/
         secondsHand.addEventListener('transitionstart', handleTransform); /* function reference to execute it once event is to start, function() will run it during page load*/
      } else {
          secondsHand.style.transform = (`rotate(${secondsDegrees}deg)`);
      }

      const mins = now.getMinutes();
      let minsDegrees = ((mins /60) * 360) + ((seconds/60)*6) + (mins === 0 && seconds === 0 ? 0 : 90); /* && seconds === 0 condition is added to avoid the mins handler to add 0 after the min-hand is removed at 0 mins*/
      if (minsDegrees === 0 && secondsDegrees === 0) {/* at 0 mins the handler rotates 90deg before to continue, therefore I have to remove this event before to start*/
         console.log(`secondsDegress: ${secondsDegrees}, minsDegrees: ${minsDegrees}`);
         minsHand.addEventListener('transitionstart', handleTransform); /* function reference to execute it once event is to start, function() will run it during page load*/
      } else {
        minsHand.style.transform = (`rotate(${minsDegrees}deg)`);
      }

      const hours = now.getHours();
      let hoursDegrees = ((hours /12) * 360) + ((mins/60)*30) + 90;//(hours === 12 ? 0 : 90);
      if (hoursDegrees === 0){/* at 0 hours the handler rotates 90deg before to continue, therefore I have to remove this event before to start*/
         console.log(`hours 0: ${mins}, hoursDegrees 0: ${hoursDegrees}`); //
         hoursHand.addEventListener('transitionstart', handleTransform); /* function reference to execute it once event is to start, function() will run it during page load*/
      } else {
        hoursHand.style.transform = (`rotate(${hoursDegrees}deg)`);
      }
    }
    setInterval(setDate, 1000); 
    function handleTransform(e) {
        const classAttr = this.getAttribute("class"); 
        /* checks which classAttr is running to remove respective class from the div*/
        if(classAttr.includes('second-hand')){
          this.classList.remove('second-hand'); /* removes class second .hand from the respective div */
        } else if(classAttr.includes('min-hand')) {
          this.classList.remove('min-hand'); /* removes class min .hand from the respective div */
        } else if(classAttr.includes('hour-hand')) {
          this.classList.remove('hour-hand'); /* removes class hour .hand from the respective div */
        };
        this.classList.remove('hand');
        this.classList.toggle('handStop'); /* will add class .handStop to the respective div */
        const computedStyle = window.getComputedStyle(this); 
        const handTransform = computedStyle.transform; // get classAttr transform property
      
        /* removes the the respective event listener whih was created only when either seconds or mins or hours === 0 */
        if(classAttr.includes('second-hand')){
           secondsHand.removeEventListener('transitionstart', handleTransform);
        } else if(classAttr.includes('min-hand')) {
           minsHand.removeEventListener('transitionstart', handleTransform);
        } else if(classAttr.includes('hour-hand')) {
           hoursHand.removeEventListener('transitionstart', handleTransform);
        };
        this.classList.remove('handStop');
        this.classList.toggle('hand'); /* will add class .hand to the respective div */

        /* checks which classAttr is running to toggle/add the respective class in the div*/
        if(classAttr.includes('second-hand')){
          this.classList.toggle('second-hand'); /* will add class .hand from the respective div */
        } else if(classAttr.includes('min-hand')) {
          this.classList.toggle('min-hand'); /* adds class min .hand from the respective div */
        } else if(classAttr.includes('hour-hand')) {
          this.classList.toggle('hour-hand'); /* adds class hour .hand from the respective div */
        };
    }
     /* CANVAS
    https://www.w3schools.com/graphics/canvas_intro.asp
    https://www.w3schools.com/jsref/api_canvas.asp
    https://www.w3schools.com/jsref/canvas_font.asp
    https://www.w3schools.com/jsref/playcanvas.php?filename=playcanvas_fontweight
    */
    const canvas = document.getElementById('clockCanvas');
    const ctx = canvas.getContext('2d');
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = Math.min(centerX, centerY) * 0.85; // Adjust radius as needed

    function drawNumbers() {
        ctx.font = 'bold 30px Arial'; // Set font style
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillStyle = 'black'; // Set color for numbers
        //ctx.direction = 'ltr'; // rtl
        const degrees = '90';
        
        for (let i = 1; i <= 12; i++) {
            const angle = (i * Math.PI / 6) - (Math.PI / 2); // Calculate angle for each number (adjust for 12 o'clock at top)
            const x = centerX + radius * 0.85 * Math.cos(angle); // Adjust 0.85 for distance from center
            const y = centerY + radius * 0.85 * Math.sin(angle);
            
            if (i===3 || i===9) {
              //i.style.transform = (`rotate(${degrees}deg)`);
              
            };
            
            ctx.fillText(i, x, y);
        }
    }

    drawNumbers(); // Call the function to draw the numbers
  </script>
</body>
</html>
